name: canal
category: others
description: canal主要用途是基于 MySQL 数据库增量日志解析，提供增量数据订阅和消费
environment: |
  本应用在Docker环境中运行，安装Docker执行如下命令
  ```
  yum install -y docker
  ```
tags: |
  canal镜像的Tag由其版本信息和基础镜像版本信息组成，详细内容如下

  | Tags                                                                                                                           | Currently                              | Architectures |
  |--------------------------------------------------------------------------------------------------------------------------------|----------------------------------------|---------------|
  | [1.1.8-oe2403sp1](https://gitee.com/openeuler/openeuler-docker-images/blob/master/Others/canal/1.1.8/24.03-lts-sp1/Dockerfile) | canal 1.1.8 on openEuler 24.03-LTS-SP1 | amd64, arm64  |
  | [1.1.8-oe2403sp2](https://gitee.com/openeuler/openeuler-docker-images/blob/master/Others/canal/1.1.8/24.03-lts-sp2/Dockerfile) | canal 1.1.8 on openEuler 24.03-LTS-SP2 | amd64, arm64  |

  注意，以下`{Tag}`的值按照需求，替换为上述表格中的tag内容。

download: |
  拉取镜像到本地
  ```
  docker pull openeuler/canal:{Tag}
  ```

usage: |
  
  - 准备
  
    对于自建 MySQL , 需要先开启 Binlog 写入功能，配置 binlog-format 为 ROW 模式，my.cnf 中配置如下：
    ```
    [mysqld]
    log-bin=mysql-bin # 开启 binlog
    binlog-format=ROW # 选择 ROW 模式
    server_id=1 # 配置 MySQL replaction 需要定义，不要和 canal 的 slaveId 重复
    ```
  
    **注意：** 针对阿里云 RDS for MySQL , 默认打开了 binlog , 并且账号默认具有 binlog dump 权限 , 不需要任何权限或者 binlog 设置,可以直接跳过这一步
    授权 canal 链接 MySQL 账号具有作为 MySQL slave 的权限, 如果已有账户可直接 grant
  
    ```
    CREATE USER canal IDENTIFIED BY 'canal';  
    GRANT SELECT, REPLICATION SLAVE, REPLICATION CLIENT ON *.* TO 'canal'@'%';
    -- GRANT ALL PRIVILEGES ON *.* TO 'canal'@'%' ;
    FLUSH PRIVILEGES;
    ```
  
  - 启动
  
    ```
    docker run -d --name my-canal -p 30306:3306 openeuler/canal:{Tag}
    ```
    当 `my-canal` 实例启动后，你可以使用 `docker logs` 查看其运行日志。
  

license: Apache-2.0 license
similar_packages:
  - N/A
dependency:
  - openjdk
  - maven

homepage: https://github.com/alibaba/canal
upstream:
  version_url: alibaba/canal
  version_prefix: canal-
  version_filter: alpha;fix
  backend: GitHub
  version_scheme: RPM